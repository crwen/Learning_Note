# 并发基础

## 并发编程三大特性

* **原子性**：一个或多个操作在 CPU 执行的过程中不被中断的特性
* **可见性**：一个线程对共享变量进行了修改，其他线程能够立刻督导最新值
* **有序性**：代码在运行期间保证按照编写的顺序执行

## happen-before

* **程序顺序行规则**：在一个线程中，如果 A 操作在 B 操作之前，那么 A happen-before B
* **`volatile` 变量原则**：对于 `volatile` 变量的写操作相对于后续的读操作可见
* **传递规则**：如果 A happen-before B，B happen-before C，则 A happen-before C
* **上锁原则**：一个锁的解锁 happen-before 后续对这个锁的加锁
* **线程启动原则**：A 线程启动子线程 B，那么`start()` 操作 happen-before B 中的任意操作，即 B 可以看到 A 在启动 B 前的操作
* **线程终结原则**：主线程 A 等待子线程 B 完成（A 调用 B 的 `join()` 方法），当子线程 B 完成后（`join()` 方法返回），主线程能看到子线程 B 的所有操作
* **线程中断原则**：线程 `interrupt()` 方法一定遭遇检测到线程的中断信号
* **对象终结原则**：一个对象初始化操作肯定闲鱼它的 `finalize()` 方法

